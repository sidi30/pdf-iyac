<div class="app-container">
  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <img src="/assets/images/justice-liberte.jpg" alt="Justice & LibertÃ©" class="header-logo">
      <h1>GÃ©nÃ©rateur de Documents Officiels</h1>
    </div>
  </header>

  <div class="main-content">
    <!-- Formulaire de saisie -->
    <div class="form-section">
      <div class="form-card">
        <h2>ğŸ“ Informations du Document</h2>
        
        <div class="form-group">
          <label for="communiqueNumber">
            <strong>NumÃ©ro du CommuniquÃ©</strong>
          </label>
          <input 
            type="text" 
            id="communiqueNumber"
            [value]="documentData().communiqueNumber"
            (input)="updateCommuniqueNumber($any($event.target).value)"
            placeholder="Ex: 001/2024"
            class="form-input"
          />
        </div>

        <div class="form-group">
          <label for="date">
            <strong>Date</strong>
          </label>
          <div class="date-input-group">
            <input 
              type="text" 
              id="date"
              [value]="documentData().date"
              (input)="updateDate($any($event.target).value)"
              placeholder="Ex: 9 novembre 2025"
              class="form-input"
            />
            <button (click)="resetDate()" class="btn-reset" title="RÃ©initialiser Ã  aujourd'hui">
              ğŸ“…
            </button>
          </div>
          <small class="form-hint">Date actuelle: {{ getCurrentDate() }}</small>
        </div>

        <div class="form-group">
          <label for="content">
            <strong>Contenu du Document</strong>
          </label>
          <textarea 
            id="content"
            [value]="documentData().content"
            (input)="updateContent($any($event.target).value)"
            rows="15"
            placeholder="Saisissez le contenu de votre document..."
            class="form-textarea"
          ></textarea>
          <small class="form-hint">Le contenu sera formatÃ© automatiquement dans le document</small>
        </div>

        <div class="form-group">
          <label for="photo">
            <strong>Photo (Optionnelle)</strong>
          </label>
          <div class="photo-upload-group">
            <input 
              type="file" 
              id="photo"
              accept="image/*"
              (change)="onPhotoChange($event)"
              class="form-file"
            />
            <button (click)="resetPhoto()" class="btn-reset" title="RÃ©initialiser la photo par dÃ©faut">
              ğŸ”„ Photo par dÃ©faut
            </button>
          </div>
          <small class="form-hint">Photo affichÃ©e en bas du document (par dÃ©faut: Ibrahim Yacouba)</small>
        </div>

        <div class="action-buttons">
          <button 
            (click)="togglePreview()" 
            class="btn btn-secondary"
          >
            {{ showPreview() ? 'ğŸ‘ï¸ Masquer l\'aperÃ§u' : 'ğŸ‘ï¸ Afficher l\'aperÃ§u' }}
          </button>
          
          <button 
            (click)="generateImage()" 
            class="btn btn-success"
            [disabled]="isGenerating()"
          >
            <span *ngIf="!isGenerating()">ğŸ–¼ï¸ TÃ©lÃ©charger Image</span>
            <span *ngIf="isGenerating()">â³ GÃ©nÃ©ration...</span>
          </button>
          
          <button 
            (click)="generatePDF()" 
            class="btn btn-primary"
            [disabled]="isGenerating()"
          >
            <span *ngIf="!isGenerating()">ğŸ“¥ TÃ©lÃ©charger PDF</span>
            <span *ngIf="isGenerating()">â³ GÃ©nÃ©ration...</span>
          </button>
        </div>
      </div>
    </div>

    <!-- PrÃ©visualisation du document -->
    <div class="preview-section" *ngIf="showPreview()">
      <div class="preview-card">
        <h2>ğŸ‘€ AperÃ§u du Document</h2>
        
        <div class="document-preview" #documentPreview>
          <div class="document-page">
            <!-- En-tÃªte du document -->
            <div class="doc-header">
              <img 
                src="/assets/images/justice-liberte.jpg" 
                alt="Justice & LibertÃ©" 
                class="doc-logo"
              />
            </div>

            <!-- Titre du communiquÃ© -->
            <div class="doc-title">
              <h2 class="communique-title">COMMUNIQUÃ‰ OFFICIEL NÂ° {{ documentData().communiqueNumber }}</h2>
              <div class="communique-subtitle">ComitÃ© Justice et LibertÃ© / Voix Unies pour Ibrahim Yacoubou</div>
            </div>

            <!-- Informations du communiquÃ© -->
            <div class="doc-info">
              <div class="doc-date">
                <strong>Date :</strong> {{ documentData().date }}
              </div>
            </div>

            <!-- Ligne de sÃ©paration -->
            <div class="doc-separator"></div>

            <!-- Contenu du document -->
            <div class="doc-content">
              <pre>{{ documentData().content }}</pre>
            </div>

            <!-- Signature et cachet -->
            <div class="doc-footer">
              <div class="signature-section">
                <div class="signature-label">Le Coordinateur</div>
                <img 
                  src="/assets/images/signature.jpg" 
                  alt="Signature" 
                  class="signature-img"
                />
                <div class="signature-name">Dr Djibril Oumarou</div>
              </div>
              
              <div class="stamp-section">
                <img 
                  src="/assets/images/cachet.jpg" 
                  alt="Cachet" 
                  class="stamp-img"
                />
              </div>
            </div>

            <!-- Photo et Contact -->
            <div class="doc-bottom">
              <div class="photo-section">
                <img 
                  [src]="customPhotoUrl()" 
                  alt="Photo" 
                  class="iyac-photo"
                  crossorigin="anonymous"
                />
                <div class="photo-caption">Ibrahim Yacouba</div>
              </div>
              
              <div class="doc-contact">
                <p>
                  <strong>Email:</strong> contact&#64;liberteiyac.com<br>
                  <strong>ğŸ“ TÃ©l:</strong> (+227) 95 45 96 88
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="app-footer">
    <p>Justice & LibertÃ© - Voix Unies pour Ibrahim Yacouba Â© {{ currentYear }}</p>
  </footer>
</div>
